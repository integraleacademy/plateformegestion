<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Contr√¥le des formateurs</title>

  <!-- CSS principal si tu l‚Äôutilises -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>

<div style="max-width:1000px;margin:30px auto;background:#fff;padding:25px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.08);">

  <h2 style="margin-top:0;">üë®‚Äçüè´ Contr√¥le des formateurs</h2>

  <!-- Formulaire ajout formateur -->
  <form method="POST" action="{{ url_for('add_formateur') }}" style="display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end;margin-bottom:20px;">
    <div style="flex:1 1 180px;">
      <label>Nom</label>
      <input type="text" name="nom" required style="width:100%;padding:6px 8px;border-radius:6px;border:1px solid #ddd;">
    </div>
    <div style="flex:1 1 180px;">
      <label>Pr√©nom</label>
      <input type="text" name="prenom" required style="width:100%;padding:6px 8px;border-radius:6px;border:1px solid #ddd;">
    </div>
    <div style="flex:1 1 220px;">
      <label>Email</label>
      <input type="email" name="email" style="width:100%;padding:6px 8px;border-radius:6px;border:1px solid #ddd;">
    </div>
    <div style="flex:1 1 180px;">
      <label>T√©l√©phone</label>
      <input type="text" name="telephone" style="width:100%;padding:6px 8px;border-radius:6px;border:1px solid #ddd;">
    </div>
    <div>
      <button type="submit" style="padding:8px 14px;border:none;border-radius:8px;background:#1e8449;color:#fff;font-weight:600;cursor:pointer;">
        ‚ûï Ajouter
      </button>
    </div>
  </form>

  {% if formateurs %}
  <table style="width:100%;border-collapse:collapse;font-size:14px;">
    <thead>
      <tr style="background:#f4f6f7;">
        <th style="text-align:left;padding:8px;border-bottom:1px solid #eee;">Formateur</th>
        <th style="text-align:left;padding:8px;border-bottom:1px solid #eee;">Email</th>
        <th style="text-align:left;padding:8px;border-bottom:1px solid #eee;">T√©l√©phone</th>
        <th style="text-align:left;padding:8px;border-bottom:1px solid #eee;">Conformit√©</th>
        <th style="text-align:right;padding:8px;border-bottom:1px solid #eee;">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for f in formateurs %}
      <tr>
        <td style="padding:8px;border-bottom:1px solid #f0f0f0;">
          <a href="{{ url_for('formateur_detail', fid=f.id) }}" style="text-decoration:none;color:#2c3e50;font-weight:600;">
            {{ f.prenom }} {{ f.nom|upper }}
          </a>
        </td>
        <td style="padding:8px;border-bottom:1px solid #f0f0f0;">{{ f.email or "‚Äî" }}</td>
        <td style="padding:8px;border-bottom:1px solid #f0f0f0;">{{ f.telephone or "‚Äî" }}</td>
        <td style="padding:8px;border-bottom:1px solid #f0f0f0;">
          {% set conf = f.conformite %}
          {% if conf.total %}
            {{ conf.conformes }} / {{ conf.total }} conformes
          {% else %}
            ‚Äî
          {% endif %}
        </td>
        <td style="padding:8px;border-bottom:1px solid #f0f0f0;text-align:right;">
          <a href="{{ url_for('formateur_detail', fid=f.id) }}" style="margin-right:8px;font-size:13px;">üîç Ouvrir</a>
          <a href="{{ url_for('edit_formateur', fid=f.id) }}" style="margin-right:8px;font-size:13px;">‚úèÔ∏è Modifier</a>
          <form method="POST" action="{{ url_for('delete_formateur', fid=f.id) }}" style="display:inline;" onsubmit="return confirm('Supprimer ce formateur ?');">
            <button type="submit" style="border:none;background:none;color:#c0392b;font-size:13px;cursor:pointer;">üóëÔ∏è Supprimer</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p style="margin-top:10px;">Aucun formateur enregistr√© pour le moment.</p>
  {% endif %}

<!-- ===== LISTE DES CL√âS & BADGES (vue d√©taill√©e) ===== -->
<div style="margin-top:40px;padding:20px;background:#f8f9fa;border-radius:12px;">

  <!-- === DOCUMENT ORGANIGRAMME CL√âS === -->
<h3 style="margin-top:0;margin-bottom:15px;">üìÑ Plan d‚Äôorganigramme</h3>

<iframe 
  src="{{ url_for('static', filename='uploads/Organigramme cle.pdf') }}" 
  style="width:100%;height:600px;border:1px solid #ddd;border-radius:8px;">
</iframe>

<hr style="margin:25px 0;">


  <!-- üîë CL√âS -->
  <h3 style="margin-top:0;margin-bottom:15px;">üîë Cl√©s</h3>

<table style="width:100%;border-collapse:collapse;font-size:14px;margin-bottom:30px;">
  <thead>
    <tr style="background:#eef1f5;">
      <th style="padding:8px;text-align:left;">Num√©ro</th>
      <th style="padding:8px;text-align:left;">Type</th>
      <th style="padding:8px;text-align:left;">Attribu√©e √†</th>
    </tr>
  </thead>

  <tbody>
    {% for num, info in etat_cles.items() %}

    {# --- COULEUR AUTO SELON LE TYPE --- #}
    {% set color =
        "#0d6efd" if info.type == "PASS GENERAL"
        else "#f39c12" if info.type == "PASS PARTIEL"
        else "#1e8449"
    %}

    <tr>
      <td style="padding:8px;border-bottom:1px solid #eee;font-weight:600;">
        {{ num }}
      </td>

      <td style="padding:8px;border-bottom:1px solid #eee;">
        <span style="font-weight:700; color:{{ color }};">
          {{ info.type }}
        </span>
      </td>

      <td style="padding:8px;border-bottom:1px solid #eee;">
        {% if info.attribue_a == "Libre" %}
          <span style="color:#777;">Libre</span>
        {% else %}
          <span style="color:#1e8449;font-weight:700;">
            {{ info.attribue_a }}
          </span>
        {% endif %}
      </td>
    </tr>

    {% endfor %}
  </tbody>
</table>


  <hr style="margin:25px 0;">

  <!-- üü¶ BADGES -->
  <h3 style="margin-bottom:15px;">üü¶ Badges portail</h3>

  <table style="width:100%;border-collapse:collapse;font-size:14px;">
    <thead>
      <tr style="background:#eef1f5;">
        <th style="padding:8px;text-align:left;">Num√©ro</th>
        <th style="padding:8px;text-align:left;">Attribu√© √†</th>
      </tr>
    </thead>
    <tbody>
{% for num, info in etat_badges.items() %}
<tr>
  <td style="padding:8px;border-bottom:1px solid #eee;font-weight:600;">
    {{ num }}
  </td>
  <td style="padding:8px;border-bottom:1px solid #eee;">

    {% if info.attribue_a == "Libre" %}
      <span style="color:#777;">Libre</span>
    {% else %}
      <span style="color:#0d6efd;font-weight:700;">
        {{ info.attribue_a }}
      </span>
    {% endif %}

  </td>
</tr>
{% endfor %}

    </tbody>
  </table>

</div>




</div>

</body>
</html>







